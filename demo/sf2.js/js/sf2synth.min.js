/** @license sf2synth.js 2013 - imaya / GREE Inc. [ https://github.com/gree/sf2synth.js ] The MIT License */(function() {'use strict';function k(b){throw b;}var l=void 0,n=!0,p=null,s=!1,w,y=this;function z(b,d){var a=b.split("."),c=y;!(a[0]in c)&&c.execScript&&c.execScript("var "+a[0]);for(var f;a.length&&(f=a.shift());)!a.length&&d!==l?c[f]=d:c=c[f]?c[f]:c[f]={}};function C(b,d,a){this.b=b;this.destination=d;this.c=a;this.Qa=a.channel;this.key=a.key;this.Pa=a.velocity;this.buffer=a.sample;this.playbackRate=a.basePlaybackRate;this.sampleRate=a.sampleRate;this.volume=a.volume;this.ia=a.panpot;this.p=a.pitchBend;this.q=a.pitchBendSensitivity;this.ya=a.modEnvToPitch;this.k=a.expression;this.startTime=b.currentTime;this.K=this.playbackRate;this.ha=s}w=C.prototype;
w.noteOn=function(){var b=this.b,d=this.c,a=this.buffer,c,f,e,g=this.b.currentTime,h=g+d.volDelay,t=g+d.modDelay,m=h+d.volAttack+d.volHold,q=h+d.modAttack+d.modHold,r=m+d.volDecay,u=q+d.modDecay;f=d.loopStart/this.sampleRate;e=d.loopEnd/this.sampleRate;var v=d.start/this.sampleRate,x,a=a.subarray(0,a.length+d.end);c=this.pa=b.createBuffer(1,a.length,this.sampleRate);c.getChannelData(0).set(a);a=this.T=b.createBufferSource();a.buffer=c;a.loop=1===(d.sampleModes&1);a.loopStart=f;a.loopEnd=e;F(this,
this.p);c=this.Ua=b.createPanner();f=this.L=b.createGainNode();e=f.gain;this.t=b.createGainNode();this.t.gain.value=this.k/127;b=this.filter=b.createBiquadFilter();b.type=b.LOWPASS;c.panningModel=0;c.setPosition(Math.sin(this.ia*Math.PI/2),0,Math.cos(this.ia*Math.PI/2));x=this.volume*(this.Pa/127)*(1-d.initialAttenuation/1E3);0>x&&(x=0);e.setValueAtTime(0,g);e.setValueAtTime(0,h);e.setTargetValueAtTime(x,h,d.volAttack);e.setValueAtTime(x,m);e.linearRampToValueAtTime(x*(1-d.volSustain),r);b.Q.setValueAtTime(d.initialFilterQ*
Math.pow(10,200),g);h=G(d.initialFilterFc);m=G(d.initialFilterFc+d.modEnvToFilterFc);r=h+(m-h)*(1-d.modSustain);b.frequency.setValueAtTime(h,g);b.frequency.setValueAtTime(h,t);b.frequency.setTargetValueAtTime(m,t,d.modAttack);b.frequency.setValueAtTime(m,q);b.frequency.linearRampToValueAtTime(r,u);a.connect(b);b.connect(c);c.connect(this.t);this.t.connect(f);d.mute||this.connect();a.start(0,v)};function G(b){return 440*Math.pow(2,(b-6900)/1200)}w.noteOff=function(){this.ha=n};
w.release=function(){var b=this.c,d=this.T,a=this.L,c=this.b.currentTime,f=b.releaseTime-64,e=b.volRelease*a.gain.value,f=c+e+e*f/(0>f?64:63),e=this.filter,g=G(b.initialFilterFc),h=G(b.initialFilterFc+b.modEnvToFilterFc),h=c+b.modRelease*(g===h?1:(e.frequency.value-g)/(h-g));if(this.pa)switch(b.sampleModes){case 1:a.gain.cancelScheduledValues(0);a.gain.setValueAtTime(a.gain.value,c);a.gain.linearRampToValueAtTime(0,f);e.frequency.cancelScheduledValues(0);e.frequency.setValueAtTime(e.frequency.value,
c);e.frequency.linearRampToValueAtTime(g,h);d.playbackRate.cancelScheduledValues(0);d.playbackRate.setValueAtTime(d.playbackRate.value,c);d.playbackRate.linearRampToValueAtTime(this.K,h);d.stop(f);break;case 2:y.console.log("detect unused sampleModes");break;case 3:d.loop=s}};w.connect=function(){this.L.connect(this.destination)};w.disconnect=function(){this.L.disconnect(0)};
function F(b,d){b.K=b.playbackRate*Math.pow(Math.pow(2,1/12),d/(0>d?8192:8191)*b.q*b.c.scaleTuning);var a=b.T.playbackRate,c=b.K,f=b.startTime,e=b.c,g=f+e.modAttack,h=g+e.modDecay,t=c*Math.pow(Math.pow(2,1/12),b.ya*b.c.scaleTuning);a.cancelScheduledValues(0);a.setValueAtTime(c,f);a.linearRampToValueAtTime(t,g);a.linearRampToValueAtTime(c+(t-c)*(1-e.modSustain),h)};function H(b,d){d=d||{};this.input=b;this.m=d.index||0;this.length=d.length||b.length-this.m;this.offset=this.m;this.padding=d.padding!==l?d.padding:n;this.qa=d.bigEndian!==l?d.bigEndian:s}function ia(b,d,a){this.type=b;this.size=d;this.offset=a}
H.prototype.parse=function(){var b=this.length+this.offset;for(this.i=[];this.m<b;){var d=this.input,a=this.m,c=l;this.i.push(new ia(String.fromCharCode(d[a++],d[a++],d[a++],d[a++]),c=this.qa?(d[a++]<<24|d[a++]<<16|d[a++]<<8|d[a++])>>>0:(d[a++]|d[a++]<<8|d[a++]<<16|d[a++]<<24)>>>0,a));a+=c;this.padding&&1===(a-this.offset&1)&&a++;this.m=a}};function I(b,d){var a=b.i[d];return a===l?p:a};function L(b,d){d=d||{};this.input=b;this.Ca=d.parserOption}
L.prototype.parse=function(){var b,d,a=new H(this.input,this.Ca);a.parse();1!==a.i.length&&k(Error("wrong chunk length"));a=I(a,0);a===p&&k(Error("chunk not found"));var c=this.input,f=a.offset,e;"RIFF"!==a.type&&k(Error("invalid chunk type:"+a.type));e=String.fromCharCode(c[f++],c[f++],c[f++],c[f++]);"sfbk"!==e&&k(Error("invalid signature:"+e));a=new H(c,{index:f,length:a.size-4});a.parse();3!==a.i.length&&k(Error("invalid sfbk structure"));c=I(a,0);f=this.input;e=c.offset;var g;"LIST"!==c.type&&
k(Error("invalid chunk type:"+c.type));g=String.fromCharCode(f[e++],f[e++],f[e++],f[e++]);"INFO"!==g&&k(Error("invalid signature:"+g));(new H(f,{index:e,length:c.size-4})).parse();c=I(a,1);f=this.input;e=c.offset;"LIST"!==c.type&&k(Error("invalid chunk type:"+c.type));g=String.fromCharCode(f[e++],f[e++],f[e++],f[e++]);"sdta"!==g&&k(Error("invalid signature:"+g));c=new H(f,{index:e,length:c.size-4});c.parse();1!==c.i.length&&k(Error("TODO"));this.oa=I(c,0);a=I(a,2);c=this.input;f=a.offset;"LIST"!==
a.type&&k(Error("invalid chunk type:"+a.type));e=String.fromCharCode(c[f++],c[f++],c[f++],c[f++]);"pdta"!==e&&k(Error("invalid signature:"+e));a=new H(c,{index:f,length:a.size-4});a.parse();9!==a.i.length&&k(Error("invalid pdta chunk"));c=I(a,0);f=this.input;e=c.offset;g=this.Fa=[];var h=c.offset+c.size;for("phdr"!==c.type&&k(Error("invalid chunk type:"+c.type));e<h;)g.push({Ga:String.fromCharCode.apply(p,f.subarray(e,e+=20)),Ea:f[e++]|f[e++]<<8,d:f[e++]|f[e++]<<8,ka:f[e++]|f[e++]<<8,Sa:(f[e++]|f[e++]<<
8|f[e++]<<16|f[e++]<<24)>>>0,Ra:(f[e++]|f[e++]<<8|f[e++]<<16|f[e++]<<24)>>>0,Ta:(f[e++]|f[e++]<<8|f[e++]<<16|f[e++]<<24)>>>0});c=I(a,1);f=this.input;e=c.offset;g=this.Ha=[];h=c.offset+c.size;for("pbag"!==c.type&&k(Error("invalid chunk type:"+c.type));e<h;)g.push({la:f[e++]|f[e++]<<8,M:f[e++]|f[e++]<<8});c=I(a,2);"pmod"!==c.type&&k(Error("invalid chunk type:"+c.type));this.na=M(this,c);c=I(a,3);"pgen"!==c.type&&k(Error("invalid chunk type:"+c.type));this.ma=N(this,c);c=I(a,4);f=this.input;e=c.offset;
g=this.c=[];h=c.offset+c.size;for("inst"!==c.type&&k(Error("invalid chunk type:"+c.type));e<h;)g.push({ua:String.fromCharCode.apply(p,f.subarray(e,e+=20)),aa:f[e++]|f[e++]<<8});c=I(a,5);f=this.input;e=c.offset;g=this.va=[];h=c.offset+c.size;for("ibag"!==c.type&&k(Error("invalid chunk type:"+c.type));e<h;)g.push({ba:f[e++]|f[e++]<<8,ta:f[e++]|f[e++]<<8});c=I(a,6);"imod"!==c.type&&k(Error("invalid chunk type:"+c.type));this.da=M(this,c);c=I(a,7);"igen"!==c.type&&k(Error("invalid chunk type:"+c.type));
this.ca=N(this,c);h=I(a,8);a=this.input;c=h.offset;f=this.Ja=[];e=this.Ka=[];g=h.offset+h.size;var t,m,q,r,u,v,x;for("shdr"!==h.type&&k(Error("invalid chunk type:"+h.type));c<g;){h=String.fromCharCode.apply(p,a.subarray(c,c+=20));d=(a[c++]<<0|a[c++]<<8|a[c++]<<16|a[c++]<<24)>>>0;b=(a[c++]<<0|a[c++]<<8|a[c++]<<16|a[c++]<<24)>>>0;t=(a[c++]<<0|a[c++]<<8|a[c++]<<16|a[c++]<<24)>>>0;m=(a[c++]<<0|a[c++]<<8|a[c++]<<16|a[c++]<<24)>>>0;q=(a[c++]<<0|a[c++]<<8|a[c++]<<16|a[c++]<<24)>>>0;r=a[c++];u=a[c++]<<24>>
24;v=a[c++]|a[c++]<<8;x=a[c++]|a[c++]<<8;b=new Int16Array((new Uint8Array(a.subarray(this.oa.offset+2*d,this.oa.offset+2*b))).buffer);t-=d;m-=d;if(0<q){var A=q,E=l,D=l,K=l,J=l;for(d=1;22050>A;){E=new Int16Array(2*b.length);D=J=0;for(K=b.length;D<K;++D)E[J++]=b[D],E[J++]=b[D];b=E;d*=2;A*=2}q*=d;t*=d;m*=d}f.push(b);e.push({Wa:h,Na:t,ra:m,sampleRate:q,Ba:r,Da:u,Va:v,Xa:x})}this.input=p};
function M(b,d){for(var a=b.input,c=d.offset,f=d.offset+d.size,e,g,h=[];c<f;){c+=2;e=a[c++]|a[c++]<<8;g=O[e];if(g===l)h.push({type:g,value:{code:e,g:a[c]|a[c+1]<<8<<16>>16,n:a[c++],l:a[c++]}});else switch(g){case "keyRange":case "velRange":case "keynum":case "velocity":h.push({type:g,value:{n:a[c++],l:a[c++]}});break;default:h.push({type:g,value:{g:a[c++]|a[c++]<<8<<16>>16}})}c+=2;c+=2}return h}
function N(b,d){for(var a=b.input,c=d.offset,f=d.offset+d.size,e,g,h=[];c<f;)if(e=a[c++]|a[c++]<<8,g=O[e],g===l)h.push({type:g,value:{code:e,g:a[c]|a[c+1]<<8<<16>>16,n:a[c++],l:a[c++]}});else switch(g){case "keynum":case "keyRange":case "velRange":case "velocity":h.push({type:g,value:{n:a[c++],l:a[c++]}});break;default:h.push({type:g,value:{g:a[c++]|a[c++]<<8<<16>>16}})}return h}
function R(b,d,a){var c=[],f={Oa:[],keyRange:{l:127,n:0}},e;for(e=b;e<d;++e)b=a[e],c.push(b),"unknown"===b.type?f.Oa.push(b.value):f[b.type]=b.value;return{v:f,w:c}}
var O=["startAddrsOffset","endAddrsOffset","startloopAddrsOffset","endloopAddrsOffset","startAddrsCoarseOffset","modLfoToPitch","vibLfoToPitch","modEnvToPitch","initialFilterFc","initialFilterQ","modLfoToFilterFc","modEnvToFilterFc","endAddrsCoarseOffset","modLfoToVolume",,"chorusEffectsSend","reverbEffectsSend","pan",,,,"delayModLFO","freqModLFO","delayVibLFO","freqVibLFO","delayModEnv","attackModEnv","holdModEnv","decayModEnv","sustainModEnv","releaseModEnv","keynumToModEnvHold","keynumToModEnvDecay",
"delayVolEnv","attackVolEnv","holdVolEnv","decayVolEnv","sustainVolEnv","releaseVolEnv","keynumToVolEnvHold","keynumToVolEnvDecay","instrument",,"keyRange","velRange","startloopAddrsCoarseOffset","keynum","velocity","initialAttenuation",,"endloopAddrsCoarseOffset","coarseTune","fineTune","sampleID","sampleModes",,"scaleTuning","exclusiveClass","overridingRootKey"];function S(b){var d;this.input=b;this.d=0;this.bufferSize=1024;this.b=T();this.f=this.b.createGainNode();this.F=this.b.createBufferSource();this.h=[0,1,2,3,4,5,6,7,8,0,10,11,12,13,14,15];this.Y=[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];this.V=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.W=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.J=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.H=[127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127];this.X=[64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64];this.I=[s,s,s,s,s,s,
s,s,s,s,s,s,s,s,s,s];this.U=[s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s];this.e=[[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]];this.S=1/65535;this.ga=16384;this.o=Array(128);b=0;for(d=this.o.length;b<d;++b)this.o[b]=127;this.wa=ja;this.N=n;this.s=this.b.createConvolver();this.r=this.b.createGainNode()}
function T(){var b;y.AudioContext!==l?b=new y.AudioContext:y.webkitAudioContext!==l?b=new y.webkitAudioContext:y.mozAudioContext!==l?b=new y.mozAudioContext:k(Error("Web Audio not supported"));b.createGainNode===l&&(b.createGainNode=b.createGain);return b}var ka="Acoustic Piano;Bright Piano;Electric Grand Piano;Honky-tonk Piano;Electric Piano;Electric Piano 2;Harpsichord;Clavi;Celesta;Glockenspiel;Musical box;Vibraphone;Marimba;Xylophone;Tubular Bell;Dulcimer;Drawbar Organ;Percussive Organ;Rock Organ;Church organ;Reed organ;Accordion;Harmonica;Tango Accordion;Acoustic Guitar (nylon);Acoustic Guitar (steel);Electric Guitar (jazz);Electric Guitar (clean);Electric Guitar (muted);Overdriven Guitar;Distortion Guitar;Guitar harmonics;Acoustic Bass;Electric Bass (finger);Electric Bass (pick);Fretless Bass;Slap Bass 1;Slap Bass 2;Synth Bass 1;Synth Bass 2;Violin;Viola;Cello;Double bass;Tremolo Strings;Pizzicato Strings;Orchestral Harp;Timpani;String Ensemble 1;String Ensemble 2;Synth Strings 1;Synth Strings 2;Voice Aahs;Voice Oohs;Synth Voice;Orchestra Hit;Trumpet;Trombone;Tuba;Muted Trumpet;French horn;Brass Section;Synth Brass 1;Synth Brass 2;Soprano Sax;Alto Sax;Tenor Sax;Baritone Sax;Oboe;English Horn;Bassoon;Clarinet;Piccolo;Flute;Recorder;Pan Flute;Blown Bottle;Shakuhachi;Whistle;Ocarina;Lead 1 (square);Lead 2 (sawtooth);Lead 3 (calliope);Lead 4 (chiff);Lead 5 (charang);Lead 6 (voice);Lead 7 (fifths);Lead 8 (bass + lead);Pad 1 (Fantasia);Pad 2 (warm);Pad 3 (polysynth);Pad 4 (choir);Pad 5 (bowed);Pad 6 (metallic);Pad 7 (halo);Pad 8 (sweep);FX 1 (rain);FX 2 (soundtrack);FX 3 (crystal);FX 4 (atmosphere);FX 5 (brightness);FX 6 (goblins);FX 7 (echoes);FX 8 (sci-fi);Sitar;Banjo;Shamisen;Koto;Kalimba;Bagpipe;Fiddle;Shanai;Tinkle Bell;Agogo;Steel Drums;Woodblock;Taiko Drum;Melodic Tom;Synth Drum;Reverse Cymbal;Guitar Fret Noise;Breath Noise;Seashore;Bird Tweet;Telephone Ring;Helicopter;Applause;Gunshot".split(";");
function U(b){var d,a,c,f,e;b=b.ja;b.parse();var g=b.Fa,h=b.Ha,t=[],m,q,r,u,v;u=0;for(v=g.length;u<v;++u){m=g[u].ka;q=g[u+1]?g[u+1].ka:h.length;for(r=[];m<q;++m)e=R(h[m].la,h[m+1]?h[m+1].la:b.ma.length,b.ma),c=e.v,d=e.w,f=R(h[m].M,h[m+1]?h[m+1].M:b.na.length,b.na),e=f.v,f=f.w,r.push({$:c,sa:d,za:e,Aa:f}),c=c.instrument!==l?c.instrument.g:e.instrument!==l?e.instrument.g:p;t.push({name:g[u].Ga,info:r,u:g[u],c:c})}h=b.c;r=b.va;g=[];v=0;for(m=h.length;v<m;++v){q=h[v].aa;c=h[v+1]?h[v+1].aa:r.length;u=
[];for(e=c;q<e;++q)d=R(r[q].ba,r[q+1]?r[q+1].ba:b.ca.length,b.ca),c=d.v,f=d.w,a=R(r[q].M,r[q+1]?r[q+1].ta:b.da.length,b.da),d=a.v,a=a.w,u.push({$:c,sa:f,za:d,Aa:a});g.push({name:h[v].ua,info:u})}h=[];m=0;for(q=t.length;m<q;++m)if(c=t[m],v=c.u.Ea,"number"===typeof c.c&&(u=g[c.c],"EOI"!==u.name.replace(/\0*$/,""))){h[c.u.d]===l&&(h[c.u.d]=[]);r=h[c.u.d];r[v]=[];r[v].name=c.name;c=0;for(e=u.info.length;c<e;++c){d=b;f=r[v];a=u.info[c].$;var x=l,A=l,E=l,D=l,K=l,J=l,Z=l,$=l,aa=l,ba=l,ca=l,da=l,ea=l,fa=
l,ga=l,P=l,Q=l,B=l,ha=l;if(!(a.keyRange===l||a.sampleID===l)){E=V(a,"delayVolEnv",-12E3);D=V(a,"attackVolEnv",-12E3);K=V(a,"holdVolEnv",-12E3);J=V(a,"decayVolEnv",-12E3);Z=V(a,"sustainVolEnv");$=V(a,"releaseVolEnv",-12E3);aa=V(a,"delayModEnv",-12E3);ba=V(a,"attackModEnv",-12E3);ca=V(a,"holdModEnv",-12E3);da=V(a,"decayModEnv",-12E3);ea=V(a,"sustainModEnv");fa=V(a,"releaseModEnv",-12E3);ga=V(a,"coarseTune")+V(a,"fineTune")/100;P=V(a,"scaleTuning",100)/100;Q=V(a,"freqVibLFO");B=a.keyRange.n;for(ha=a.keyRange.l;B<=
ha;++B)f[B]||(x=V(a,"sampleID"),A=d.Ka[x],f[B]={sample:d.Ja[x],sampleRate:A.sampleRate,sampleModes:V(a,"sampleModes"),basePlaybackRate:Math.pow(Math.pow(2,1/12),(B-V(a,"overridingRootKey",A.Ba)+ga+A.Da/100)*P),modEnvToPitch:V(a,"modEnvToPitch")/100,scaleTuning:P,start:32768*V(a,"startAddrsCoarseOffset")+V(a,"startAddrsOffset"),end:32768*V(a,"endAddrsCoarseOffset")+V(a,"endAddrsOffset"),loopStart:A.Na+32768*V(a,"startloopAddrsCoarseOffset")+V(a,"startloopAddrsOffset"),loopEnd:A.ra+32768*V(a,"endloopAddrsCoarseOffset")+
V(a,"endloopAddrsOffset"),volDelay:Math.pow(2,E/1200),volAttack:Math.pow(2,D/1200),volHold:Math.pow(2,K/1200)*Math.pow(2,(60-B)*V(a,"keynumToVolEnvHold")/1200),volDecay:Math.pow(2,J/1200)*Math.pow(2,(60-B)*V(a,"keynumToVolEnvDecay")/1200),volSustain:Z/1E3,volRelease:Math.pow(2,$/1200),modDelay:Math.pow(2,aa/1200),modAttack:Math.pow(2,ba/1200),modHold:Math.pow(2,ca/1200)*Math.pow(2,(60-B)*V(a,"keynumToModEnvHold")/1200),modDecay:Math.pow(2,da/1200)*Math.pow(2,(60-B)*V(a,"keynumToModEnvDecay")/1200),
modSustain:ea/1E3,modRelease:Math.pow(2,fa/1200),initialFilterFc:V(a,"initialFilterFc",13500),modEnvToFilterFc:V(a,"modEnvToFilterFc"),initialFilterQ:V(a,"initialFilterQ"),reverbEffectSend:V(a,"reverbEffectSend"),initialAttenuation:V(a,"initialAttenuation"),freqVibLFO:Q?8.176*Math.pow(2,Q/1200):l})}}}return h}function V(b,d,a){a===l&&(a=0);return b[d]?b[d].g:a}
var ja=T().createBuffer(function(b){var d,a=b.length,c=new Uint8Array(a);for(d=0;d<a;++d)c[d]=b.charCodeAt(d);return c}(window.atob("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")).buffer,s);
S.prototype.connect=function(){this.F.connect(this.f);this.f.connect(this.b.destination);this.N&&la(this)};function la(b){b.f.connect(b.s);b.s.connect(b.r);b.r.connect(b.b.destination)}S.prototype.start=function(){this.connect();this.F.start(0);this.ga=16383;this.f.gain.value=this.S*(16383/16384)};S.prototype.stop=S.prototype.disconnect=function(){this.F.disconnect(0);this.f.disconnect(0);this.s.disconnect(0);this.r.disconnect(0)};
S.prototype.O=function(b){this.N!==b&&(this.s.disconnect(0),this.r.disconnect(0),(this.N=b)&&la(this))};var W=["Instrument","Vol","Pan","Bend","Range"];
function ma(b){var d=b.a=document.createElement("table"),a=document.createElement("thead"),c=document.createElement("tbody"),f,e,g,h,t,m;a.appendChild(na(W,n));for(m=0;16>m;++m){f=na(W.length+128,s);c.appendChild(f);e=f.querySelector("td:nth-child(1)");g=document.createElement("input");g.setAttribute("type","checkbox");g.addEventListener("change",function(a,b){return function(){var c=this.checked,d=a.e[b],e;if(a.U[b]=c){c=0;for(e=d.length;c<e;++c)d[c].disconnect()}else{c=0;for(e=d.length;c<e;++c)d[c].connect()}}}(b,
m),s);e.appendChild(g);if(9!==m){h=document.createElement("select");for(g=0;128>g;++g)t=document.createElement("option"),t.textContent=ka[g],h.appendChild(t);e.appendChild(h);h.addEventListener("change",function(a,b){return function(c){X(a,b,c.target.selectedIndex)}}(b,m),s);h.selectedIndex=b.h[m]}else e.appendChild(document.createTextNode("[ RHYTHM TRACK ]"));f=f.querySelectorAll("td:nth-last-child(-n+128)");for(g=0;128>g;++g)f[g].addEventListener("mousedown",function(a,b,c){return function(d){d.preventDefault();
a.Z=n;a.noteOn(b,c,127)}}(b,m,g)),f[g].addEventListener("mouseover",function(a,b,c){return function(d){d.preventDefault();a.Z&&a.noteOn(b,c,127)}}(b,m,g)),f[g].addEventListener("mouseout",function(a,b,c){return function(d){d.preventDefault();a.noteOff(b,c,0)}}(b,m,g)),f[g].addEventListener("mouseup",function(a,b,c){return function(d){d.preventDefault();a.Z=s;a.noteOff(b,c,0)}}(b,m,g))}d.appendChild(a);d.appendChild(c);return d}
function na(b,d){var a=document.createElement("tr"),c,f=b instanceof Array,e,g=f?b.length:b;for(e=0;e<g;++e)c=document.createElement(d?"th":"td"),c.textContent=f&&b[e]!==l?b[e]:"",a.appendChild(c);return a}w=S.prototype;
w.noteOn=function(b,d,a){var c=this.D[9===b?128:this.d][this.h[b]],f;this.a&&this.a.querySelector("tbody > tr:nth-child("+(b+1)+") > td:nth-child("+(W.length+d+1)+")").classList.add("note-on");if(c)if(f=c[d]){var e=this.V[b]-64;f.channel=b;f.key=d;f.velocity=a;f.panpot=e/(0>e?64:63);f.volume=this.Y[b]/127;f.pitchBend=this.W[b]-8192;f.expression=this.H[b];f.pitchBendSensitivity=this.J[b];f.mute=this.U[b];f.releaseTime=this.X[b];9===b&&(c.volume*=this.o[d]/127);d=new C(this.b,this.f,f);d.noteOn();this.e[b].push(d)}else y.console.warn("instrument not found: bank=%s instrument=%s channel=%s key=%s",
9===b?128:this.d,this.h[b],b,d);else y.console.warn("instrument not found: bank=%s instrument=%s channel=%s",9===b?128:this.d,this.h[b],b)};w.noteOff=function(b,d){var a=this.D[9===b?128:this.d][this.h[b]],c,f=this.e[b],e,g=this.I[b];this.a&&this.a.querySelector("tbody > tr:nth-child("+(b+1)+") > td:nth-child("+(d+W.length+1)+")").classList.remove("note-on");if(a){a=0;for(c=f.length;a<c;++a)e=f[a],e.key===d&&(e.noteOff(),g||(e.release(),f.splice(a,1),--a,--c))}};
function oa(b,d,a){var c=b.e[d];if(!(b.I[d]=!(64>a))){d=0;for(a=c.length;d<a;++d)b=c[d],b.ha&&(b.release(),c.splice(d,1),--d,--a)}}function X(b,d,a){b.a&&9!==d&&(b.a.querySelector("tbody > tr:nth-child("+(d+1)+") > td:first-child > select").selectedIndex=a);9!==d&&(b.h[d]=a)}function pa(b,d,a){b.a&&(b.a.querySelector("tbody > tr:nth-child("+(d+1)+") > td:nth-child(2)").textContent=a);b.Y[d]=a}
w.k=function(b,d){var a,c,f=this.e[b];a=0;for(c=f.length;a<c;++a){var e=f[a];e.t.gain.value=(e.k=d)/127}this.H[b]=d};function qa(b,d,a){b.a&&(b.a.querySelector("tbody > tr:nth-child("+(d+1)+") > td:nth-child(3)").textContent=a);b.V[d]=a}w.p=function(b,d,a){d=d&127|(a&127)<<7;var c,f=this.e[b],e=d-8192;this.a&&(this.a.querySelector("tbody > tr:nth-child("+(b+1)+") > td:nth-child(4)").textContent=e);a=0;for(c=f.length;a<c;++a)F(f[a],e);this.W[b]=d};
w.q=function(b,d){this.a&&(this.a.querySelector("tbody > tr:nth-child("+(b+1)+") > td:nth-child(5)").textContent=d);this.J[b]=d};function Y(){this.R=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.P=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.B=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.xa=this.onmessage.bind(this);this.j=n;window.addEventListener("DOMContentLoaded",function(){this.Ia=n}.bind(this),s)}w=Y.prototype;w.Ma=function(b){this.Ia?this.load(b):window.addEventListener("DOMContentLoaded",function a(){window.removeEventListener("DOMContentLoaded",a,s);this.load(b)}.bind(this),s)};
w.load=function(b){var d;this.G();d=this.A=new XMLHttpRequest;d.open("GET",b,n);d.responseType="arraybuffer";d.addEventListener("load",function(a){a=a.target;this.onload(a.response);"function"===typeof this.ea&&this.ea(a.response);this.A=p}.bind(this),s);d.send()};w.O=function(b){this.z.O(b)};w.G=function(){this.A&&(this.A.abort(),this.A=p)};w.onload=function(b){b=new Uint8Array(b);this.fa(b)};
w.fa=function(b){var d;this.G();if(this.z)d=this.z,d.input=b,d.ja=new L(b),d.D=U(d);else{d=this.z=new S(b);document.body.appendChild(ma(d));b=d;var a;b.ja=new L(b.input);b.D=U(b);b.s.buffer=b.wa;b.r.gain.value=1;for(a=0;16>a;++a)X(b,a,a),pa(b,a,100),qa(b,a,64),b.p(a,0,64),b.q(a,2),b.I[a]=s,b.H[a]=127;for(a=0;128>a;++a)b.o[a]=127;d.start();window.addEventListener("message",this.xa,s)}window.opener?window.opener.postMessage("link,ready","*"):window.parent!==window&&window.parent.postMessage("link,ready",
"*")};w.onmessage=function(b){b=b.data.split(",");switch(b.shift()){case "midi":ra(this,b.map(function(b){return parseInt(b,16)}));break;case "link":b=b.shift();switch(b){case "reqpatch":window.opener?window.opener.postMessage("link,patch","*"):window.parent!==window&&window.parent.postMessage("link,patch","*");break;case "setpatch":break;default:y.console.error("unknown link message:",b)}break;default:y.console.error("unknown message type")}};w.La=function(b){this.ea=b};
function ra(b,d){var a=d[0]&15,c=b.z;switch(d[0]&240){case 128:c.noteOff(a,d[1],d[2]);break;case 144:0<d[2]?c.noteOn(a,d[1],d[2]):c.noteOff(a,d[1],0);break;case 176:switch(d[1]){case 6:if(b.j)switch(b.C[a]){case 0:switch(b.B[a]){case 0:c.q(a,d[2])}}else switch(b.R[a]){case 26:c.o[b.P[a]]=d[2]}break;case 38:if(b.j)switch(b.C[a]){case 0:switch(b.B[a]){case 0:c.q(a,c.J[a]+d[2]/100)}}break;case 7:pa(c,a,d[2]);break;case 10:qa(c,a,d[2]);break;case 120:for(var f=c.e[a],e;0<f.length;)e=f.shift(),c.noteOff(a,
e.key,0),e.release(),e.disconnect();break;case 121:c.k(a,127);c.p(a,0,64);oa(c,a,0);break;case 98:b.j=s;b.P[a]=d[2];break;case 99:b.j=s;b.R[a]=d[2];break;case 100:b.j=n;b.B[a]=d[2];break;case 101:b.j=n;b.C[a]=d[2];break;case 64:oa(c,a,d[2]);break;case 11:c.k(a,d[2]);break;case 74:c.X[a]=d[2]}break;case 192:X(c,a,d[1]);break;case 224:c.p(a,d[1],d[2]);break;case 240:switch(d[1]){case 127:switch(d[3]){case 4:switch(d[4]){case 1:a=d[5]+(d[6]<<7),c.ga=a,c.f.gain.value=c.S*(a/16384)}}}}};z("SoundFont.WebMidiLink",Y);z("SoundFont.WebMidiLink.prototype.setup",Y.prototype.Ma);z("SoundFont.WebMidiLink.prototype.loadSoundFont",Y.prototype.fa);z("SoundFont.WebMidiLink.prototype.cancelLoading",Y.prototype.G);z("SoundFont.WebMidiLink.prototype.setLoadCallback",Y.prototype.La);z("SoundFont.WebMidiLink.prototype.setReverb",Y.prototype.O);}).call(this); //@ sourceMappingURL=sf2synth.min.js.map
