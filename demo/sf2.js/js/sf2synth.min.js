/** @license sf2synth.js 2013 - imaya / GREE Inc. [ https://github.com/gree/sf2synth.js ] The MIT License */(function() {'use strict';function l(d){throw d;}var n=void 0,q=null,w=!1,y=this;function z(d,c){var b=d.split("."),a=y;!(b[0]in a)&&a.execScript&&a.execScript("var "+b[0]);for(var e;b.length&&(e=b.shift());)!b.length&&c!==n?a[e]=c:a=a[e]?a[e]:a[e]={}};function B(d,c,b){this.c=d;this.destination=c;this.b=b;this.Y=b.channel;this.key=b.key;this.ya=b.velocity;this.buffer=b.sample;this.playbackRate=b.basePlaybackRate;this.sampleRate=b.sampleRate;this.volume=b.volume;this.P=b.panpot;this.l=b.pitchBend;this.q=b.pitchBendSensitivity;this.ea=b.modEnvToPitch;this.startTime=d.currentTime;this.t=this.playbackRate}
B.prototype.noteOn=function(){var d=this.c,c=this.b,b=this.buffer,a,e,f,g=this.c.currentTime,h=g+c.volAttack,m=g+c.modAttack,v=h+c.volDecay,p=m+c.modDecay;e=c.loopStart/this.sampleRate;f=c.loopEnd/this.sampleRate;var r=c.start/this.sampleRate,b=b.subarray(0,b.length+c.end);a=this.W=d.createBuffer(1,b.length,this.sampleRate);a.getChannelData(0).set(b);b=this.s=d.createBufferSource();b.buffer=a;b.loop=9!==this.Y;b.loopStart=e;b.loopEnd=f;C(this,this.l);a=this.ia=d.createPanner();e=this.H=d.createGainNode();
f=e.gain;d=this.filter=d.createBiquadFilter();d.type=d.LOWPASS;a.panningModel=0;a.setPosition(Math.sin(this.P*Math.PI/2),0,Math.cos(this.P*Math.PI/2));f.setValueAtTime(0,g);f.linearRampToValueAtTime(this.volume*(this.ya/127),h);f.linearRampToValueAtTime(this.volume*(1-c.volSustain),v);d.Q.setValueAtTime(c.initialFilterQ*Math.pow(10,200),g);h=440*Math.pow(2,(c.initialFilterFc-6900)/1200);v=440*Math.pow(2,(c.initialFilterFc+c.modEnvToFilterFc-6900)/1200);c=h+(v-h)*(1-c.modSustain);d.frequency.setValueAtTime(h,
g);d.frequency.linearRampToValueAtTime(v,m);d.frequency.linearRampToValueAtTime(c,p);b.connect(d);d.connect(a);a.connect(e);e.connect(this.destination);b.start(0,r)};
B.prototype.noteOff=function(){var d=this.b,c=this.s,b=this.H,a=this.c.currentTime,e=a+d.volRelease,a=a+d.modRelease;this.W&&(b.gain.cancelScheduledValues(0),b.gain.linearRampToValueAtTime(0,e),c.playbackRate.cancelScheduledValues(0),c.playbackRate.linearRampToValueAtTime(this.t,a),c.loop=w,c.stop(e),setTimeout(function(a){return function(){a.s.disconnect(0);a.ia.disconnect(0);a.H.disconnect(0)}}(this),1E3*d.volRelease))};
function C(d,c){d.t=d.playbackRate*Math.pow(Math.pow(2,1/12),d.q*(c/(0>c?8192:8191))*d.b.scaleTuning);var b=d.s.playbackRate,a=d.t,e=d.startTime,f=d.b,g=e+f.modAttack,h=g+f.modDecay,m=a*Math.pow(Math.pow(2,1/12),d.ea*d.b.scaleTuning);b.cancelScheduledValues(0);b.setValueAtTime(a,e);b.linearRampToValueAtTime(m,g);b.linearRampToValueAtTime(a+(m-a)*(1-f.modSustain),h)};function D(d,c){c=c||{};this.input=d;this.j=c.index||0;this.length=c.length||d.length-this.j;this.offset=this.j;this.padding=c.padding!==n?c.padding:!0;this.X=c.bigEndian!==n?c.bigEndian:w}function ea(d,c,b){this.type=d;this.size=c;this.offset=b}
D.prototype.parse=function(){var d=this.length+this.offset;for(this.f=[];this.j<d;){var c=this.input,b=this.j,a=n;this.f.push(new ea(String.fromCharCode(c[b++],c[b++],c[b++],c[b++]),a=this.X?(c[b++]<<24|c[b++]<<16|c[b++]<<8|c[b++])>>>0:(c[b++]|c[b++]<<8|c[b++]<<16|c[b++]<<24)>>>0,b));b+=a;this.padding&&1===(b-this.offset&1)&&b++;this.j=b}};function E(d,c){var b=d.f[c];return b===n?q:b};function I(d,c){c=c||{};this.input=d;this.ka=c.parserOption}
I.prototype.parse=function(){var d,c,b=new D(this.input,this.ka);b.parse();1!==b.f.length&&l(Error("wrong chunk length"));b=E(b,0);b===q&&l(Error("chunk not found"));var a=this.input,e=b.offset,f;"RIFF"!==b.type&&l(Error("invalid chunk type:"+b.type));f=String.fromCharCode(a[e++],a[e++],a[e++],a[e++]);"sfbk"!==f&&l(Error("invalid signature:"+f));b=new D(a,{index:e,length:b.size-4});b.parse();3!==b.f.length&&l(Error("invalid sfbk structure"));a=E(b,0);e=this.input;f=a.offset;var g;"LIST"!==a.type&&
l(Error("invalid chunk type:"+a.type));g=String.fromCharCode(e[f++],e[f++],e[f++],e[f++]);"INFO"!==g&&l(Error("invalid signature:"+g));(new D(e,{index:f,length:a.size-4})).parse();a=E(b,1);e=this.input;f=a.offset;"LIST"!==a.type&&l(Error("invalid chunk type:"+a.type));g=String.fromCharCode(e[f++],e[f++],e[f++],e[f++]);"sdta"!==g&&l(Error("invalid signature:"+g));a=new D(e,{index:f,length:a.size-4});a.parse();1!==a.f.length&&l(Error("TODO"));this.V=E(a,0);b=E(b,2);a=this.input;e=b.offset;"LIST"!==
b.type&&l(Error("invalid chunk type:"+b.type));f=String.fromCharCode(a[e++],a[e++],a[e++],a[e++]);"pdta"!==f&&l(Error("invalid signature:"+f));b=new D(a,{index:e,length:b.size-4});b.parse();9!==b.f.length&&l(Error("invalid pdta chunk"));a=E(b,0);e=this.input;f=a.offset;g=this.na=[];var h=a.offset+a.size;for("phdr"!==a.type&&l(Error("invalid chunk type:"+a.type));f<h;)g.push({oa:String.fromCharCode.apply(q,e.subarray(f,f+=20)),ma:e[f++]|e[f++]<<8,d:e[f++]|e[f++]<<8,R:e[f++]|e[f++]<<8,Aa:(e[f++]|e[f++]<<
8|e[f++]<<16|e[f++]<<24)>>>0,za:(e[f++]|e[f++]<<8|e[f++]<<16|e[f++]<<24)>>>0,Ba:(e[f++]|e[f++]<<8|e[f++]<<16|e[f++]<<24)>>>0});a=E(b,1);e=this.input;f=a.offset;g=this.pa=[];h=a.offset+a.size;for("pbag"!==a.type&&l(Error("invalid chunk type:"+a.type));f<h;)g.push({S:e[f++]|e[f++]<<8,u:e[f++]|e[f++]<<8});a=E(b,2);"pmod"!==a.type&&l(Error("invalid chunk type:"+a.type));this.U=J(this,a);a=E(b,3);"pgen"!==a.type&&l(Error("invalid chunk type:"+a.type));this.T=K(this,a);a=E(b,4);e=this.input;f=a.offset;
g=this.b=[];h=a.offset+a.size;for("inst"!==a.type&&l(Error("invalid chunk type:"+a.type));f<h;)g.push({ca:String.fromCharCode.apply(q,e.subarray(f,f+=20)),J:e[f++]|e[f++]<<8});a=E(b,5);e=this.input;f=a.offset;g=this.da=[];h=a.offset+a.size;for("ibag"!==a.type&&l(Error("invalid chunk type:"+a.type));f<h;)g.push({K:e[f++]|e[f++]<<8,ba:e[f++]|e[f++]<<8});a=E(b,6);"imod"!==a.type&&l(Error("invalid chunk type:"+a.type));this.M=J(this,a);a=E(b,7);"igen"!==a.type&&l(Error("invalid chunk type:"+a.type));
this.L=K(this,a);h=E(b,8);b=this.input;a=h.offset;e=this.ra=[];f=this.sa=[];g=h.offset+h.size;var m,v,p,r,s,t,u;for("shdr"!==h.type&&l(Error("invalid chunk type:"+h.type));a<g;){h=String.fromCharCode.apply(q,b.subarray(a,a+=20));c=(b[a++]<<0|b[a++]<<8|b[a++]<<16|b[a++]<<24)>>>0;d=(b[a++]<<0|b[a++]<<8|b[a++]<<16|b[a++]<<24)>>>0;m=(b[a++]<<0|b[a++]<<8|b[a++]<<16|b[a++]<<24)>>>0;v=(b[a++]<<0|b[a++]<<8|b[a++]<<16|b[a++]<<24)>>>0;p=(b[a++]<<0|b[a++]<<8|b[a++]<<16|b[a++]<<24)>>>0;r=b[a++];s=b[a++]<<24>>
24;t=b[a++]|b[a++]<<8;u=b[a++]|b[a++]<<8;d=new Int16Array((new Uint8Array(b.subarray(this.V.offset+2*c,this.V.offset+2*d))).buffer);m-=c;v-=c;if(0<p){var k=p,A=n,x=n,H=n,F=n;for(c=1;22050>k;){A=new Int16Array(2*d.length);x=F=0;for(H=d.length;x<H;++x)A[F++]=d[x],A[F++]=d[x];d=A;c*=2;k*=2}p*=c;m*=c;v*=c}e.push(d);f.push({Da:h,va:m,$:v,sampleRate:p,ha:r,la:s,Ca:t,Ea:u})}this.input=q};
function J(d,c){for(var b=d.input,a=c.offset,e=c.offset+c.size,f,g,h=[];a<e;){a+=2;f=b[a++]|b[a++]<<8;g=L[f];if(g===n)h.push({type:g,value:{code:f,e:b[a]|b[a+1]<<8<<16>>16,k:b[a++],i:b[a++]}});else switch(g){case "keyRange":case "velRange":case "keynum":case "velocity":h.push({type:g,value:{k:b[a++],i:b[a++]}});break;default:h.push({type:g,value:{e:b[a++]|b[a++]<<8<<16>>16}})}a+=2;a+=2}return h}
function K(d,c){for(var b=d.input,a=c.offset,e=c.offset+c.size,f,g,h=[];a<e;)if(f=b[a++]|b[a++]<<8,g=L[f],g===n)h.push({type:g,value:{code:f,e:b[a]|b[a+1]<<8<<16>>16,k:b[a++],i:b[a++]}});else switch(g){case "keynum":case "keyRange":case "velRange":case "velocity":h.push({type:g,value:{k:b[a++],i:b[a++]}});break;default:h.push({type:g,value:{e:b[a++]|b[a++]<<8<<16>>16}})}return h}
function M(d,c,b){var a=[],e={xa:[],keyRange:{i:127,k:0}},f;for(f=d;f<c;++f)d=b[f],a.push(d),"unknown"===d.type?e.xa.push(d.value):e[d.type]=d.value;return{o:e,p:a}}
var L=["startAddrsOffset","endAddrsOffset","startloopAddrsOffset","endloopAddrsOffset","startAddrsCoarseOffset","modLfoToPitch","vibLfoToPitch","modEnvToPitch","initialFilterFc","initialFilterQ","modLfoToFilterFc","modEnvToFilterFc","endAddrsCoarseOffset","modLfoToVolume",,"chorusEffectsSend","reverbEffectsSend","pan",,,,"delayModLFO","freqModLFO","delayVibLFO","freqVibLFO","delayModEnv","attackModEnv","holdModEnv","decayModEnv","sustainModEnv","releaseModEnv","keynumToModEnvHold","keynumToModEnvDecay",
"delayVolEnv","attackVolEnv","holdVolEnv","decayVolEnv","sustainVolEnv","releaseVolEnv","keynumToVolEnvHold","keynumToVolEnvDecay","instrument",,"keyRange","velRange","startloopAddrsCoarseOffset","keynum","velocity","initialAttenuation",,"endloopAddrsCoarseOffset","coarseTune","fineTune","sampleID","sampleModes",,"scaleTuning","exclusiveClass","overridingRootKey"];function P(d){this.input=d;this.d=0;this.bufferSize=1024;var c;y.AudioContext!==n?c=new y.AudioContext:y.webkitAudioContext!==n?c=new y.webkitAudioContext:y.mozAudioContext!==n?c=new y.mozAudioContext:l(Error("Web Audio not supported"));c.createGainNode===n&&(c.createGainNode=c.createGain);this.c=c;this.g=this.c.createGainNode();this.Z=this.c.createDynamicsCompressor();this.r=this.c.createBufferSource();this.h=[0,1,2,3,4,5,6,7,8,0,10,11,12,13,14,15];this.F=[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];this.B=
[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.D=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.m=[[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]];this.A=1/32768;this.O=16384}var fa="Acoustic Piano;Bright Piano;Electric Grand Piano;Honky-tonk Piano;Electric Piano;Electric Piano 2;Harpsichord;Clavi;Celesta;Glockenspiel;Musical box;Vibraphone;Marimba;Xylophone;Tubular Bell;Dulcimer;Drawbar Organ;Percussive Organ;Rock Organ;Church organ;Reed organ;Accordion;Harmonica;Tango Accordion;Acoustic Guitar (nylon);Acoustic Guitar (steel);Electric Guitar (jazz);Electric Guitar (clean);Electric Guitar (muted);Overdriven Guitar;Distortion Guitar;Guitar harmonics;Acoustic Bass;Electric Bass (finger);Electric Bass (pick);Fretless Bass;Slap Bass 1;Slap Bass 2;Synth Bass 1;Synth Bass 2;Violin;Viola;Cello;Double bass;Tremolo Strings;Pizzicato Strings;Orchestral Harp;Timpani;String Ensemble 1;String Ensemble 2;Synth Strings 1;Synth Strings 2;Voice Aahs;Voice Oohs;Synth Voice;Orchestra Hit;Trumpet;Trombone;Tuba;Muted Trumpet;French horn;Brass Section;Synth Brass 1;Synth Brass 2;Soprano Sax;Alto Sax;Tenor Sax;Baritone Sax;Oboe;English Horn;Bassoon;Clarinet;Piccolo;Flute;Recorder;Pan Flute;Blown Bottle;Shakuhachi;Whistle;Ocarina;Lead 1 (square);Lead 2 (sawtooth);Lead 3 (calliope);Lead 4 (chiff);Lead 5 (charang);Lead 6 (voice);Lead 7 (fifths);Lead 8 (bass + lead);Pad 1 (Fantasia);Pad 2 (warm);Pad 3 (polysynth);Pad 4 (choir);Pad 5 (bowed);Pad 6 (metallic);Pad 7 (halo);Pad 8 (sweep);FX 1 (rain);FX 2 (soundtrack);FX 3 (crystal);FX 4 (atmosphere);FX 5 (brightness);FX 6 (goblins);FX 7 (echoes);FX 8 (sci-fi);Sitar;Banjo;Shamisen;Koto;Kalimba;Bagpipe;Fiddle;Shanai;Tinkle Bell;Agogo;Steel Drums;Woodblock;Taiko Drum;Melodic Tom;Synth Drum;Reverse Cymbal;Guitar Fret Noise;Breath Noise;Seashore;Bird Tweet;Telephone Ring;Helicopter;Applause;Gunshot".split(";");
function Q(d,c,b){b===n&&(b=0);return d[c]?d[c].e:b}P.prototype.start=function(){this.r.connect(this.g);this.g.connect(this.c.destination);this.r.start(0);this.O=16383;this.g.gain.value=this.A*(16383/16384)};P.prototype.stop=function(){this.r.disconnect(0);this.g.disconnect(0);this.Z.disconnect(0)};var R=["Instrument","Vol","Pan","Bend","Range"];
function ga(d){var c=d.a=document.createElement("table"),b=document.createElement("thead"),a=document.createElement("tbody"),e,f,g;b.appendChild(S(R,!0));for(f=0;16>f;++f){e=S(R.length+128,w);a.appendChild(e);if(9!==f){var h=document.createElement("select"),m;for(g=0;128>g;++g)m=document.createElement("option"),m.textContent=fa[g],h.appendChild(m);e.querySelector("td:nth-child(1)").appendChild(h);h.addEventListener("change",function(a,b){return function(c){T(a,b,c.target.selectedIndex)}}(d,f),w)}e=
e.querySelectorAll("td:nth-last-child(-n+128)");for(g=0;128>g;++g)e[g].addEventListener("mousedown",function(a,b,c){return function(d){d.preventDefault();a.G=!0;a.noteOn(b,c,127)}}(d,f,g)),e[g].addEventListener("mouseover",function(a,b,c){return function(d){d.preventDefault();a.G&&a.noteOn(b,c,127)}}(d,f,g)),e[g].addEventListener("mouseout",function(a,b,c){return function(d){d.preventDefault();a.noteOff(b,c,0)}}(d,f,g)),e[g].addEventListener("mouseup",function(a,b,c){return function(d){d.preventDefault();
a.G=w;a.noteOff(b,c,0)}}(d,f,g))}c.appendChild(b);c.appendChild(a);return c}function S(d,c){var b=document.createElement("tr"),a,e=d instanceof Array,f,g=e?d.length:d;for(f=0;f<g;++f)a=document.createElement(c?"th":"td"),a.textContent=e&&d[f]!==n?d[f]:"",b.appendChild(a);return b}
P.prototype.noteOn=function(d,c,b){var a=this.z[9===d?128:this.d][this.h[d]];this.a&&this.a.querySelector("tbody > tr:nth-child("+(d+1)+") > td:nth-child("+(R.length+c+1)+")").classList.add("note-on");a?(a=a[c])?(a.channel=d,a.key=c,a.velocity=b,a.panpot=this.B[d],a.volume=this.F[d],a.pitchBend=this.C[d],a.pitchBendSensitivity=this.D[d],c=new B(this.c,this.g,a),c.noteOn(),this.m[d].push(c)):y.console.warn("instrument not found: bank=%s instrument=%s channel=%s key=%s",9===d?128:this.d,this.h[d],d,
c):y.console.warn("instrument not found: bank=%s instrument=%s channel=%s",9===d?128:this.d,this.h[d],d)};P.prototype.noteOff=function(d,c){var b=this.z[9===d?128:this.d][this.h[d]],a,e=this.m[d],f;this.a&&this.a.querySelector("tbody > tr:nth-child("+(d+1)+") > td:nth-child("+(c+R.length+1)+")").classList.remove("note-on");if(b){b=0;for(a=e.length;b<a;++b)f=e[b],f.key===c&&(f.noteOff(),e.splice(b,1),--b,--a)}};
function T(d,c,b){d.a&&(9===c?d.a.querySelector("tbody > tr:nth-child("+(c+1)+") > td:first-child").textContent="[ RHYTHM TRACK ]":d.a.querySelector("tbody > tr:nth-child("+(c+1)+") > td:first-child > select").selectedIndex=b);9!==c&&(d.h[c]=b)}function U(d,c,b){d.a&&(d.a.querySelector("tbody > tr:nth-child("+(c+1)+") > td:nth-child(2)").textContent=b);d.F[c]=b/127}
function V(d,c,b){var a=b-64,a=a/(0>a?64:63);d.a&&(d.a.querySelector("tbody > tr:nth-child("+(c+1)+") > td:nth-child(3)").textContent=b);d.B[c]=a}P.prototype.l=function(d,c,b){var a,e=this.m[d];c=(c&127|(b&127)<<7)-8192;this.a&&(this.a.querySelector("tbody > tr:nth-child("+(d+1)+") > td:nth-child(4)").textContent=c);b=0;for(a=e.length;b<a;++b)C(e[b],c);this.C[d]=c};
P.prototype.q=function(d,c){this.a&&(this.a.querySelector("tbody > tr:nth-child("+(d+1)+") > td:nth-child(5)").textContent=c);this.D[d]=c};function W(){this.w=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.v=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];window.addEventListener("DOMContentLoaded",function(){this.qa=!0}.bind(this),w)}W.prototype.ua=function(d){this.qa?this.load(d):window.addEventListener("DOMContentLoaded",function b(){window.removeEventListener("DOMContentLoaded",b,w);this.load(d)}.bind(this),w)};
W.prototype.load=function(d){var c=new XMLHttpRequest;c.open("GET",d,!0);c.responseType="arraybuffer";c.addEventListener("load",function(b){b=b.target;this.onload(b.response);"function"===typeof this.N&&this.N(b.response)}.bind(this),w);c.send()};
W.prototype.onload=function(d){var c,b,a,e;d=new Uint8Array(d);d=this.wa=new P(d);var f=ga(d),g;d.ja=new I(d.input);g=d.ja;g.parse();var h=g.na,m=g.pa,v=[],p,r,s,t,u;t=0;for(u=h.length;t<u;++t){p=h[t].R;r=h[t+1]?h[t+1].R:m.length;for(s=[];p<r;++p)c=M(m[p].S,m[p+1]?m[p+1].S:g.T.length,g.T),a=c.o,e=c.p,b=M(m[p].u,m[p+1]?m[p+1].u:g.U.length,g.U),c=b.o,b=b.p,s.push({I:a,aa:e,fa:c,ga:b}),a=a.instrument!==n?a.instrument.e:c.instrument!==n?c.instrument.e:q;v.push({name:h[t].oa,info:s,n:h[t],b:a})}var k,
m=g.b;s=g.da;h=[];u=0;for(p=m.length;u<p;++u){r=m[u].J;a=m[u+1]?m[u+1].J:s.length;t=[];for(c=a;r<c;++r)e=M(s[r].K,s[r+1]?s[r+1].K:g.L.length,g.L),a=e.o,b=e.p,k=M(s[r].u,s[r+1]?s[r+1].ba:g.M.length,g.M),e=k.o,k=k.p,t.push({I:a,aa:b,fa:e,ga:k});h.push({name:m[u].ca,info:t})}m=[];p=0;for(r=v.length;p<r;++p)if(a=v[p],u=a.n.ma,"number"===typeof a.b&&(t=h[a.b],"EOI"!==t.name.replace(/\0*$/,""))){m[a.n.d]===n&&(m[a.n.d]=[]);s=m[a.n.d];s[u]=[];s[u].name=a.name;a=0;for(c=t.info.length;a<c;++a){e=g;b=s[u];
k=t.info[a].I;var A=n,x=n,H=n,F=n,X=n,Y=n,Z=n,$=n,aa=n,ba=n,ca=n,N=n,O=n,G=n,da=n;if(!(k.keyRange===n||k.sampleID===n)){H=Q(k,"attackVolEnv",-12E3);F=Q(k,"decayVolEnv",-12E3);X=Q(k,"sustainVolEnv");Y=Q(k,"releaseVolEnv",-12E3);Z=Q(k,"attackModEnv",-12E3);$=Q(k,"decayModEnv",-12E3);aa=Q(k,"sustainModEnv");ba=Q(k,"releaseModEnv",-12E3);ca=Q(k,"coarseTune")+Q(k,"fineTune")/100;N=Q(k,"scaleTuning",100)/100;O=Q(k,"freqVibLFO");G=k.keyRange.k;for(da=k.keyRange.i;G<=da;++G)b[G]||(A=Q(k,"sampleID"),x=e.sa[A],
b[G]={sample:e.ra[A],sampleRate:x.sampleRate,basePlaybackRate:Math.pow(Math.pow(2,1/12),(G-Q(k,"overridingRootKey",x.ha)+ca+x.la/100)*N),modEnvToPitch:Q(k,"modEnvToPitch")/100,scaleTuning:N,start:32768*Q(k,"startAddrsCoarseOffset")+Q(k,"startAddrsOffset"),end:32768*Q(k,"endAddrsCoarseOffset")+Q(k,"endAddrsOffset"),loopStart:x.va+32768*Q(k,"startloopAddrsCoarseOffset")+Q(k,"startloopAddrsOffset"),loopEnd:x.$+32768*Q(k,"endloopAddrsCoarseOffset")+Q(k,"endloopAddrsOffset"),volAttack:Math.pow(2,H/1200),
volDecay:Math.pow(2,F/1200),volSustain:X/1E3,volRelease:Math.pow(2,Y/1200),modAttack:Math.pow(2,Z/1200),modDecay:Math.pow(2,$/1200),modSustain:aa/1E3,modRelease:Math.pow(2,ba/1200),initialFilterFc:Q(k,"initialFilterFc",13500),modEnvToFilterFc:Q(k,"modEnvToFilterFc"),initialFilterQ:Q(k,"initialFilterQ"),freqVibLFO:O?8.176*Math.pow(2,O/1200):n})}}}d.z=m;for(g=0;16>g;++g)T(d,g,g),U(d,g,100),V(d,g,64),d.l(g,0,64),d.q(g,2);d.start();document.body.appendChild(f);window.addEventListener("message",this.onmessage.bind(this),
w);window.opener?window.opener.postMessage("link,ready","*"):window.parent!==window&&window.parent.postMessage("link,ready","*")};
W.prototype.onmessage=function(d){d=d.data.split(",");switch(d.shift()){case "midi":ha(this,d.map(function(c){return parseInt(c,16)}));break;case "link":d=d.shift();switch(d){case "reqpatch":window.opener?window.opener.postMessage("link,patch","*"):window.parent!==window&&window.parent.postMessage("link,patch","*");break;case "setpatch":break;default:y.console.error("unknown link message:",d)}break;default:y.console.error("unknown message type")}};W.prototype.ta=function(d){this.N=d};
function ha(d,c){var b=c[0]&15,a=d.wa;switch(c[0]&240){case 128:a.noteOff(b,c[1],c[2]);break;case 144:0<c[2]?a.noteOn(b,c[1],c[2]):a.noteOff(b,c[1],0);break;case 176:switch(c[1]){case 6:switch(d.w[b]){case 0:switch(d.v[b]){case 0:a.q(b,c[2])}}break;case 7:U(a,b,c[2]);break;case 10:V(a,b,c[2]);break;case 120:for(var e=a.m[b];0<e.length;)a.noteOff(b,e[0].key,0);break;case 121:a.l(b,0,64);break;case 100:d.w[b]=c[2];break;case 101:d.v[b]=c[2]}break;case 192:T(a,b,c[1]);break;case 224:a.l(b,c[1],c[2]);
break;case 240:switch(c[1]){case 127:switch(c[3]){case 4:switch(c[4]){case 1:b=c[5]+(c[6]<<7),a.O=b,a.g.gain.value=a.A*(b/16384)}}}}};z("SoundFont.WebMidiLink",W);z("SoundFont.WebMidiLink.prototype.setup",W.prototype.ua);z("SoundFont.WebMidiLink.prototype.setLoadCallback",W.prototype.ta);}).call(this); //@ sourceMappingURL=sf2synth.min.js.map
